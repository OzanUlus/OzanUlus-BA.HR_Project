@{
    ViewData["Title"] = "ListDayOff";
    Layout = "_LayoutEmployeeSide";
}

@model List<DayOffViewModel>


<div>
    <!-- İzin türlerini ayıran butonlar -->
    <button class="btn btn-primary" onclick="showDayOffs('All')">All Day Offs</button>
    <button class="btn btn-primary" onclick="showDayOffs('Waiting')">Waiting Day Offs</button>
    <button class="btn btn-primary" onclick="showDayOffs('Approved')">Approved Day Offs</button>
    <button class="btn btn-primary" onclick="showDayOffs('Denied')">Denied Day Offs</button>
</div>
<br />

<!-- Tüm izinleri listeleyecek tablo -->
<table class="table text-light" id="AllTable">
    <thead>
        <tr>
            <th>Day Off Type</th>
            <th>Start Date</th>
            <th>Finish Date</th>
            <th>Request Date</th>
            <th>Day Count</th>
            <th>Confirm Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var dayOff in Model)
        {
            <tr>
                <td>@dayOff.DayOffType.ToString()</td>
                <td>@dayOff.StartDate.ToString("yyyy-MM-dd")</td>
                <td>@(dayOff.FinishDate.HasValue ? dayOff.FinishDate.Value.ToString("yyyy-MM-dd") : string.Empty)</td>
                <td>@dayOff.RequestDate</td>
                <td>@dayOff.DayCount</td>
                <td>@dayOff.ConfirmStatus.ToString()</td>
            </tr>
        }
    </tbody>
</table>

<!-- Waiting Day Offs -->
<table class="table text-light" id="WaitingTable">
    <thead>
        <tr>
            <th>Day Off Type</th>
            <th>Start Date</th>
            <th>Finish Date</th>
            <th>Request Date</th>
            <th>Day Count</th>
            <th>Confirm Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var dayOff in ViewBag.WaitingDayOffs)
        {
            <tr>
                <td>@dayOff.DayOffType.ToString()</td>
                <td>@dayOff.StartDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.FinishDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.RequestDate</td>
                <td>@dayOff.DayCount</td>
                <td>@dayOff.ConfirmStatus.ToString()</td>
            </tr>
        }
    </tbody>
</table>

<!-- Approved Day Offs -->
<table class="table text-light" id="ApprovedTable">
    <thead>
        <tr>
            <th>Day Off Type</th>
            <th>Start Date</th>
            <th>Finish Date</th>
            <th>Request Date</th>
            <th>Day Count</th>
            <th>Confirm Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var dayOff in ViewBag.ApprovedDayOffs)
        {
            <tr>
                <td>@dayOff.DayOffType.ToString()</td>
                <td>@dayOff.StartDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.FinishDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.RequestDate</td>
                <td>@dayOff.DayCount</td>
                <td>@dayOff.ConfirmStatus.ToString()</td>
            </tr>
        }
    </tbody>
</table>

<!-- Denied Day Offs -->
<table class="table text-light" id="DeniedTable">
    <thead>
        <tr>
            <th>Day Off Type</th>
            <th>Start Date</th>
            <th>Finish Date</th>
            <th>Request Date</th>
            <th>Day Count</th>
            <th>Confirm Status</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var dayOff in ViewBag.DeniedDayOffs)
        {
            <tr>
                <td>@dayOff.DayOffType.ToString()</td>
                <td>@dayOff.StartDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.FinishDate.ToString("yyyy-MM-dd")</td>
                <td>@dayOff.RequestDate</td>
                <td>@dayOff.DayCount</td>
                <td>@dayOff.ConfirmStatus.ToString()</td>
            </tr>
        }
    </tbody>
</table>
<script>
    // Tabloları gizleme fonksiyonu
    function hideTables() {
        document.getElementById('AllTable').style.display = 'none';
        document.getElementById('WaitingTable').style.display = 'none';
        document.getElementById('ApprovedTable').style.display = 'none';
        document.getElementById('DeniedTable').style.display = 'none';
    }

    // İzin türlerine göre tabloyu gösterme
    function showDayOffs(status) {
        hideTables();
        var tableId = status + 'Table';
        document.getElementById(tableId).style.display = 'table';
    }

    // Sayfa yüklendiğinde default olarak "All Day Offs" tablosunu gösterme
    document.addEventListener("DOMContentLoaded", function () {
        showDayOffs('All');
    });
</script>
